# Project Overview: Final_Project

##### GENERATED BY GOOGLE GEMINI 2.5 PRO AGENT MODE

This document provides a high-level overview of the `Final_Project`, detailing its architecture, component connections, and adherence to the MVVM (Model-View-ViewModel) pattern in the MAUI application.

## 1. Overall Architecture

The project is composed of two main parts:
-   **`Api`**: An ASP.NET Core Web API that serves as the backend, providing data storage and retrieval for notes.
-   **`Maui_App`**: A .NET MAUI application that acts as the cross-platform client, consuming the API to manage notes.

## 2. API Component (`Api`)

### Purpose
The `Api` project is responsible for handling data persistence and exposing a RESTful interface for the `Maui_App` client.

### Technologies
-   **Backend Framework**: ASP.NET Core Web API
-   **Database**: MySQL
-   **ORM**: Entity Framework Core (with Pomelo MySQL provider)
-   **API Documentation**: Swagger/OpenAPI

### Key Components & Wiring

#### `Program.cs`
-   **Service Configuration**:
    -   Adds `Controllers` for handling HTTP requests.
    -   Enables `SwaggerGen` for API documentation.
    -   Configures **CORS** (Cross-Origin Resource Sharing) to allow requests from any origin, header, and method, specifically for development with the MAUI app.
    -   Sets up **Entity Framework Core** with `NotesDbContext` to connect to a MySQL database. The connection string is retrieved from configuration or defaults to `server=localhost;port=3306;database=notesdb;user=notes;password=notespwd`.
-   **Database Initialization**:
    -   Ensures the database is created on startup.
    -   Seeds initial `Note` data if the `Notes` table is empty (for development/demo purposes).
-   **Middleware Configuration**:
    -   Uses Swagger UI in development.
    -   Enables CORS.
    -   Enables Authorization.
    -   Maps controller routes.

#### `Models/Note.cs`
-   Defines the data structure for a `Note` entity, typically including properties like `Id`, `Title`, `Content`, and `Date`.

#### `Models/NotesDbContext.cs`
-   An Entity Framework Core `DbContext` that represents the session with the MySQL database. It exposes a `DbSet<Note>` for querying and saving `Note` instances.

#### `Controllers/NotesController.cs`
-   A RESTful API controller that exposes endpoints for managing `Note` resources.
-   **Endpoints**:
    -   `GET /notes`: Retrieves all notes, ordered by date descending.
    -   `GET /notes/{id}`: Retrieves a single note by ID.
    -   `POST /notes`: Creates a new note.
    -   `PUT /notes/{id}`: Updates an existing note.
    -   `DELETE /notes/{id}`: Deletes a note by ID.
    -   `GET /notes/search?query={query}`: Searches notes by title or content.
-   **Dependency Injection**: `NotesDbContext` is injected into the controller's constructor, allowing it to interact with the database.

## 3. MAUI Application Component (`Maui_App`)

### Purpose
The `Maui_App` project provides a cross-platform user interface for viewing, adding, editing, and deleting notes, consuming the `Api` backend.

### Technologies
-   **UI Framework**: .NET MAUI
-   **Architectural Pattern**: MVVM (Model-View-ViewModel)
-   **Navigation**: MAUI Shell Routing
-   **Dependency Injection**: Built-in .NET MAUI DI

### Key Components & Wiring

#### `MauiProgram.cs`
-   **Application Entry Point & Configuration**:
    -   Initializes the `MauiApp` builder.
    -   Registers fonts.
    -   **Dependency Injection Setup**:
        -   Registers `NotesViewModel` and `NotesPage` as singletons.
        -   Registers `AddEditNoteViewModel` and `AddEditNotePage` as transient services.
        -   Configures an `HttpClient` factory with **platform-aware base URLs** (e.g., `http://10.0.2.2:8080` for Android emulator, `http://localhost:8080` for others) to correctly target the API.
        -   Registers `INotesApiService` and its implementation `NotesApiService` as a singleton, injecting the configured `HttpClient`.
    -   **Routing**: Registers routes for `NotesPage` and `AddEditNotePage` using `nameof()` for type-safe navigation.

#### `Models/Note.cs`
-   Defines the client-side data model for a `Note`, mirroring the API's `Note` model.

#### `Services/INotesApiService.cs`
-   An interface defining the contract for interacting with the `NotesController` endpoints on the backend API.
-   Methods include `GetNotesAsync`, `GetNoteAsync`, `CreateNoteAsync`, `UpdateNoteAsync`, `DeleteNoteAsync`, and `SearchAsync`.

#### `Services/NotesApiService.cs`
-   The concrete implementation of `INotesApiService`.
-   Uses `HttpClient` to make asynchronous HTTP requests (GET, POST, PUT, DELETE) to the API's `/notes` endpoints.
-   Handles JSON serialization/deserialization for `Note` objects.

#### `ViewModels/NotesViewModel.cs`
-   **Purpose**: Manages the state and logic for the `NotesPage`.
-   **Data**: Holds a collection of `Note` objects (e.g., `ObservableCollection<Note>`).
-   **Commands**: Exposes commands for actions like loading notes, adding a new note, editing an existing note, deleting a note, and searching.
-   **Dependency Injection**: Receives `INotesApiService` via its constructor to fetch and manipulate notes.
-   **Navigation**: Uses MAUI's `Shell.Current.GoToAsync` for navigation to `AddEditNotePage`.

#### `ViewModels/AddEditNoteViewModel.cs`
-   **Purpose**: Manages the state and logic for the `AddEditNotePage`.
-   **Data**: Holds a single `Note` object for editing or a new `Note` for creation.
-   **Commands**: Exposes commands for saving a note (add or update) and potentially canceling.
-   **Dependency Injection**: Receives `INotesApiService` via its constructor to perform create or update operations.
-   **Navigation**: Handles returning to the previous page after saving or canceling.

#### `Views/NotesPage.xaml`
-   **Purpose**: Displays a list of notes.
-   **Binding**: Data-bound to `NotesViewModel`.
-   **UI Elements**: Typically includes a `CollectionView` or `ListView` to display notes, buttons for adding new notes, and potentially a search bar.

#### `Views/AddEditNotePage.xaml`
-   **Purpose**: Provides a form for adding a new note or editing an existing one.
-   **Binding**: Data-bound to `AddEditNoteViewModel`.
-   **UI Elements**: Includes `Entry` fields for `Title` and `Content`, and buttons for "Save" and "Cancel".

#### `App.xaml` / `App.xaml.cs`
-   The main application class, typically responsible for initializing the `AppShell`.

#### `AppShell.xaml` / `AppShell.xaml.cs`
-   Defines the visual hierarchy of the application, including tabs, flyouts, and navigation routes.
-   Acts as the main navigation container for the MAUI app.

## 4. MVVM Wiring Summary

1.  **`MauiProgram.cs`** sets up the Dependency Injection container, registering Views, ViewModels, and the `NotesApiService`.
2.  **Views** (`NotesPage`, `AddEditNotePage`) are instantiated and their `BindingContext` is implicitly or explicitly set to their corresponding **ViewModels** (`NotesViewModel`, `AddEditNoteViewModel`) via DI.
3.  **ViewModels** receive `INotesApiService` through constructor injection.
4.  **ViewModels** interact with the `NotesApiService` to perform CRUD operations on `Note` data.
5.  The `NotesApiService` uses `HttpClient` to communicate with the **`Api` backend**.
6.  The **`Api` backend** (`NotesController`) processes requests, interacts with the `NotesDbContext` (and thus the MySQL database), and returns data.
7.  **ViewModels** update their observable properties, which automatically reflects changes in the **Views** through data binding.
8.  **Views** trigger commands on their **ViewModels** in response to user interactions (e.g., button clicks, item selections).
9.  **Navigation** between `NotesPage` and `AddEditNotePage` is managed by MAUI Shell routing, initiated by commands in the ViewModels.

This setup ensures a clear separation of concerns, testability, and maintainability, adhering to modern application development principles.